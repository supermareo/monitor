# monitor
系统监控

## 模块分布
### 整体调度模块
- 定时调用运维平台接口,获取配置信息
```json
{
  "active": true,
  "collect_cron": "0 0/1 * * * ?",
  "upload_cron": "0 0/1 * * * ?",
  "cache_time": 60000
}
```
> 字段解释
```
active:是否运行,true运行,false不运行
collect_cron:cron表达式,采集任务执行时间
upload_cron:cron表达式,上报任务执行时间
cache_time:毫秒,采集结果缓存时间,过期会删除
```
### 数据采集模块
- 由quartz定时调度
- 多维度定时采集数据
- 采集到的输入扔到缓存模块处理
### 数据上报模块
- 由quartz定时调度
- 前提是网络状态联通的情况下
- 指定时间范围内随机时间从缓存中取出数据进行上报 - 取出的同时从缓存中清除
- 数据上报成功
- 数据上报失败,重新存入缓存,等待下次上报
### 本地缓存模块
- 缓存指定时间范围或大小范围,超过范围剔除老数据
- 缓存支持take操作,即取出同时删除数据
- 缓存支持重新写入,当上报失败时,重新写入缓存