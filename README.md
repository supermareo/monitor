# monitor
系统监控

## 模块分布
### 整体调度模块
- 定时调用运维平台接口,获取配置信息
```json
{
  "ccuId": "CCU_04959",
  "version": "0.0.1",
  "active": true,
  "cronCollect": "0 0/1 * * * ?",
  "cronUpload": "0 0/1 * * * ?",
  "cacheTime": 86400000
}
```
> 字段解释
```
ccuId:主机编号,支持三种方式, 单个主机编号 > 多主机编号逗号分隔 > *
      分别对应 指定单个主机配置, 针对多个主机配置, 针对所有主机配置
version:版本号
active:监控程序是否执行,true执行,false不执行
cronCollect:定时采集任务的cron表达式
cronUpload:定时上报任务的cron表达式
cacheTime:缓存文件保留的时间

...后续可以加入更多自定义配置
```
- 解析配置信息,调度任务
```
根据获取到的配置信息,动态创建,删除或更改定时上报任务,定时采集任务
```
### 数据采集模块
- 多维度定时采集数据
- 采集到的数据放到缓存模块处理
### 数据上报模块
- 指定时间范围内随机时间从缓存中取出数据进行上报
- 取出的同时从缓存中清除数据
- 数据上报,如果失败,则重新存入缓存,等待下次上报
### 本地缓存模块与定时清除模块
- 缓存数据到文件
- 缓存支持take操作,即取出同时删除数据
- 缓存支持重新写入,当上报失败时,重新写入缓存
- 定时清除模块定时扫描缓存文件夹下文件,删除超时的缓存文件
- 后续可添加支持多种缓存方式与缓存过期处理方式